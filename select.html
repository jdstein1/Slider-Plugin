<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Select Slider - An extension of a jQuery UI plugin</title>
<link type="text/css" href="./styles/jquery-ui-1.8.13.custom.css" rel="stylesheet">
<!-- Normal LESS inclusion notation for other browsers -->
<link rel="stylesheet/less" href="./styles/slider.less" />
<!-- Required LESS inclusion notation for Chrome -->
<link rel="stylesheet" type="text/less" href="./styles/slider.less" />
<link rel="stylesheet" type="text/less" href="./styles/custom.css" />
<script type="text/javascript" src="./scripts/less-1.1.3.min.js"></script>
</head>
<body>
<!-- 
Universal Slider Plugin Select Option Functionality

This plugin adds functionality to the jQuery UI slider component.  This plugin uses jQuery, jQuery UI, and Less CSS.

=-=-=-=-=-=-=-=-=-=-=-=-=
select.html

Author : Jeffrey D. Stein
Title : Select Option Functionality (for Universal Slider jQuery Plugin)
Date Created : 2011-Sep-23
Last Updated : 2011-Sep-30
Version : 1.1

Notes
=-=-=-=-=-=-=-=-=-=-=-=-=
2011-Oct-03
v/1.3
 - Used change event to trigger value updates of the select, input and handle value.
 - Consolidated change events into one function that is triggered by selects and inputs.
-------------------------
2011-Oct-03
v/1.2
 - Append inputs to handles.
-------------------------
2011-Sep-30
v/1.1
 - Added form inputs that update in sync with the sliders and select options.
-------------------------
2011-Sep-23
v/1.0
 - Started work on extending the functionality of a jQuery UI slider demo.  Original demo allows min or max slider functionality with one select option form element.  I intend to add compatibility with a range slider that uses 2 select option form elements.
-------------------------
 -->
<form id="box" autocomplete="off">
    <div class="demo">

<!-- Min/Max Slider with Select Option Function -->
        <div class="slider" id="sliderMinMax">
            <h3>Minimum</h3>
            <p class="description">How to bind a min or max slider to an existing select element. The select stays visible to display the change. When the select is changed, the slider is updated, too.</p>
            <select name="" class="select" id="selectMinMax">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option selected="selected">4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
                <option>11</option>
                <option>12</option>
                <option>13</option>
                <option>14</option>
                <option>15</option>
                <option>16</option>
                <option>17</option>
                <option>18</option>
                <option>19</option>
                <option>20</option>
            </select>
            <input type="text" class="input" id="inputMinMax" value="" />
        </div>
<!-- Range Slider with Select Option Function -->
        <div class="slider" id="sliderRange">
            <h3>Range</h3>
            <p class="description">How to bind a range slider to existing select elements. The selects stay visible to display the changes. When the select is changed, the slider is updated, too.</p>
            <select name="" class="select" id="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option selected="selected">4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
                <option>11</option>
                <option>12</option>
                <option>13</option>
                <option>14</option>
                <option>15</option>
                <option>16</option>
                <option>17</option>
                <option>18</option>
                <option>19</option>
                <option>20</option>
            </select>
            <select name="" class="select" id="">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
                <option selected="selected">11</option>
                <option>12</option>
                <option>13</option>
                <option>14</option>
                <option>15</option>
                <option>16</option>
                <option>17</option>
                <option>18</option>
                <option>19</option>
                <option>20</option>
            </select>
        </div>
    </div><!-- End demo -->
</form>
<script type="text/javascript" src="./scripts/jquery-1.6.min.js"></script>
<script type="text/javascript" src="./scripts/jquery-ui-1.8.13.custom.min.js"></script>
<!-- <script type="text/javascript" src="./scripts/pluginSlider.js"></script> -->
<script type="text/javascript">
    $(function() {
        var $thisSlider = $( "#sliderMinMax" );
        var select = $thisSlider.find( "select" );
        var $selectMinMax = $( "#selectMinMax" );
        var minMaxNew = $selectMinMax.val();
        var $inputMinMax = $thisSlider.find( "input" );
        $inputMinMax.attr( "value", minMaxNew);
        var createSlider = function( $thisSlider, ui ) {
            $thisSlider.find( ".ui-slider-handle" ).addClass( "handle" ).attr( "id","handleMinMax" );
            var $handleMinMax = $( "#handleMinMax" );
            $inputMinMax.appendTo($handleMinMax);
        };
        var slider = $thisSlider.slider({
            min : 1,
            max : 20,
            range : "max",
            value : select[0].selectedIndex + 1,
            create : function( event, ui ) {
//                console.log( "--create callback" );
                createSlider( $thisSlider, ui );
            },
            slide : function( event, ui ) {
                select[0].selectedIndex = ui.value - 1;
                $inputMinMax.val(ui.value);
            }
        });
        $( "#selectMinMax" ).change(function() {
            slider.slider( "value", this.selectedIndex + 1 );
            $inputMinMax.val(this.value);
        });
    });
    $(function() {
        var $thisSlider = $( "#sliderRange" );
        // Create an array of select elements.
        var select = $thisSlider.find( "select" );
//        console.log( "select", select );
//        console.log( "select[0]", select[0] );
//        console.log( "select[1]", select[1] );
        var $selectLo = $( select ).eq(0).attr( "id", "selectLo" );
//        console.log( "$selectLo", $selectLo );
        var $selectHi = $( select ).eq(1).attr( "id", "selectHi" );
//        console.log( "$selectHi", $selectHi );

        var loNew = $selectLo.val();
        var hiNew = $selectHi.val();
        // Add inputs dynamically.
        var $inputLo = $( "<input />" ).addClass( "input" ).attr( "id","inputLo" ).attr( "type","text" ).attr( "value",loNew);
        var $inputHi = $( "<input />" ).addClass( "input" ).attr( "id","inputHi" ).attr( "type","text" ).attr( "value",hiNew);
        var createSlider = function( $thisSlider, ui ) {
            $thisSlider.find( ".ui-slider-handle" ).eq(0).addClass( "handle" ).attr( "id","handleLo" );
            $thisSlider.find( ".ui-slider-handle" ).eq(1).addClass( "handle" ).attr( "id","handleHi" );
            var $handleLo = $( "#handleLo" );
            var $handleHi = $( "#handleHi" );
            $inputLo.appendTo($handleLo);
            $inputHi.appendTo($handleHi);
        };
        var slider = $thisSlider.slider({
            min : 1,
            max : 20,
            range : true,
//            values: [select[0].value, select[1].value],
            values : [loNew, hiNew],
            create : function( event, ui ) {
//                console.log( "-- create callback" );
                createSlider( $thisSlider, ui );
            },
            start: function( event, ui ) {
//                console.log( "-- start callback" );
            },
            slide: function( event, ui ) {
//                console.log( "-- slide callback" );

                // Sliding the LOW value
                // Set the value of the first select element to the first thing in the values array
                select[0].value = ui.values[0];
                console.log( "ui.values0: ", ui.values[0]);
                // Set the value of the first input element to the first thing in the values array
                $inputLo.val(ui.values[0]);
                console.log( "$inputLo.val: ", $inputLo.val());

                // Sliding the HIGH value
                // Set the value of the second select element to the second thing in the values array
                select[1].value = ui.values[1];
                console.log( "ui.values1: ", ui.values[1]);
                // Set the value of the second input element to the second thing in the values array
                $inputHi.val(ui.values[1]);
                console.log( "$inputHi.val: ", $inputHi.val());

            },
            stop: function( event, ui ) {
//                console.log( "-- stop callback" );
            },
            change: function( event, ui ) {
//                console.log( "-- change callback" );
            }
        });
        $inputLo.change(function() {
            console.log( "++ change event LOW input" );

            // Set value of low variable to new select option value
            loNew = this.value;

            // Set low value in values array to new select option value
            slider.slider( "values", [loNew,hiNew]);

            // Set value of high input to new select option value
            $selectLo.val(loNew);
        });
        $selectLo.change(function() {
            console.log( "++ change event LOW select" );

            // Set value of low variable to new select option value
            loNew = this.value;

            // Set low value in values array to new select option value
            slider.slider( "values", [loNew,hiNew]);

            // Set value of high input to new select option value
            $inputLo.val(loNew);
        });
        $inputHi.change(function() {
            console.log( "++ change event HIGH input" );

            // Set value of high variable to new select option value
            hiNew = this.value;

            // Set high value in values array to new select option value
            slider.slider( "values", [loNew,hiNew]);
            
            // Set value of high input to new select option value
            $selectHi.val(hiNew);
        });
        $selectHi.change( function() {
            console.log( "++ change event HIGH select" );
            myChangeEventCallback($selectHi);
            // Set high value in values array to new select option value
//            slider.slider( "values", [loNew,this.value]);
            
            // Set value of high input to new select option value
//            $inputHi.val(this.value);

//            console.log( "$inputHi.val: ", $inputHi.val());

            // Set value of high variable to new select option value
//            hiNew = this.value;
        });
        var myChangeEventCallback = function( myElement ) {
//            console.log( "myElement ++ change event **", myElement, "**." );
            console.log( "myElement", myElement );
            console.log( "myElement.value", myElement.val() );

                console.log( "pre values: ", [loNew, hiNew] );

//            console.log( "start $inputLo.val: ", $inputLo.val());
//            console.log( "start $inputHi.val: ", $inputHi.val());

            var myElementName = $(myElement).attr('id');
//            console.log( "myElementName: ", myElementName );

            var myElementNameParts = myElementName.split("t");
//            console.log( "myElementNameParts: ", myElementNameParts );

            if ( myElementNameParts[1]==="Lo" ) {
                console.log( "LO: ", myElementNameParts[1] );

                // Set value of high variable to new select option value
                loNew = myElement.val();

                // Set low value in values array to new select option value
                slider.slider( "values", [loNew, hiNew] );
                console.log( "inner values: ", [loNew, hiNew] );
//                console.log( "slider.values: ", slider.slider( "values" ) );

                if ( myElementNameParts[0]==="inpu" ) {
//                    console.log( "inpu: ", myElementNameParts[0] );
                    $selectLo.val(loNew);
                } else if ( myElementNameParts[0]==="selec" ) {
//                    console.log( "selec: ", myElementNameParts[0] );
                    $inputLo.val(loNew);
                } else {
                    console.log( "LO error" );
                };
            } else if ( myElementNameParts[1]==="Hi" ) {
                console.log( "HI: ", myElementNameParts[1] );

                // Set value of high variable to new select option value
                hiNew = myElement.val();

                // Set high value in values array to new select option value
                slider.slider( "values", [loNew, hiNew] );
                console.log( "inner values: ", [loNew, hiNew] );
//                console.log( "slider.values: ", slider.slider( "values" ) );

                if ( myElementNameParts[0]==="inpu" ) {
//                    console.log( "inpu: ", myElementNameParts[0] );
                    $selectHi.val(hiNew);
                } else if ( myElementNameParts[0]==="selec" ) {
//                    console.log( "selec: ", myElementNameParts[0] );
                    $inputHi.val(hiNew);
                } else {
                    console.log( "HI error" );
                };
            } else {
                console.log( "ERROR" );
            }

            console.log( "post values: ", [loNew, hiNew] );

//            console.log( "end $inputLo.val: ", $inputLo.val());
//            console.log( "end $inputHi.val: ", $inputHi.val());

        };
    });
</script>
</body>
</html>